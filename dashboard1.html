<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>لوحة التحكم | M PLATFORM</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root { --m-red: #dc2626; --m-bg: #fcfcfc; --m-white: #ffffff; --m-text: #1a1a1a; --m-gray: #8e8e93; }
        
        body { margin: 0; font-family: 'Cairo', sans-serif; background-color: var(--m-bg); color: var(--m-text); padding-bottom: 100px; -webkit-tap-highlight-color: transparent; }

        /* الهيدر العلوي */
        .top-nav { display: flex; justify-content: space-between; align-items: center; padding: 20px 25px; background: transparent; }
        .m-logo { width: 40px; height: 40px; background: var(--m-red); color: white; display: flex; align-items: center; justify-content: center; border-radius: 12px; font-weight: 900; font-size: 24px; box-shadow: 0 4px 10px rgba(220, 38, 38, 0.2); }
        .header-icons { display: flex; gap: 15px; }
        .circle-btn { width: 45px; height: 45px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05); color: #555; font-size: 18px; cursor: pointer; position: relative; }
        .badge { position: absolute; top: 10px; right: 10px; width: 8px; height: 8px; background: var(--m-red); border-radius: 50%; border: 2px solid white; }

        .container { padding: 0 20px; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* الترحيب */
        .welcome-text { margin: 10px 0 25px; }
        .welcome-text h1 { font-size: 26px; font-weight: 900; margin: 0; color: #333; }
        .welcome-text p { font-size: 13px; color: var(--m-gray); margin: 5px 0 0; }

        /* البطاقات العلوية الملونة */
        .stats-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 25px; }
        .stat-card { background: white; padding: 15px 10px; border-radius: 20px; text-align: center; border: 1.5px solid transparent; box-shadow: 0 4px 15px rgba(0,0,0,0.03); }
        .stat-card b { font-size: 16px; display: block; margin-bottom: 3px; }
        .stat-card span { font-size: 10px; color: var(--m-gray); font-weight: 700; }
        
        .card-red { border-color: #ffeded; } .card-red b { color: var(--m-red); }
        .card-orange { border-color: #fff4e5; } .card-orange b { color: #f59e0b; }
        .card-pink { border-color: #fdf2f2; } .card-pink b { color: #f43f5e; }

        /* البحث */
        .search-box { background: white; padding: 15px 20px; border-radius: 20px; display: flex; align-items: center; gap: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.02); margin-bottom: 25px; border: 1px solid #f0f0f0; }
        .search-box input { border: none; outline: none; width: 100%; font-family: 'Cairo'; font-size: 14px; color: #555; }

        /* شبكة الأيقونات الأساسية */
        .actions-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .action-box { background: white; padding: 30px 15px; border-radius: 35px; text-align: center; box-shadow: 0 8px 25px rgba(0,0,0,0.03); transition: 0.3s; cursor: pointer; border: 1px solid rgba(0,0,0,0.01); }
        .action-box:active { transform: scale(0.95); background: #fafafa; }
        .action-box i { font-size: 32px; color: #ff8a8a; margin-bottom: 15px; display: block; }
        .action-box h3 { margin: 0; font-size: 15px; font-weight: 800; color: #444; }

        /* الزر العائم */
        .fab { position: fixed; bottom: 110px; left: 25px; width: 60px; height: 60px; background: var(--m-red); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; box-shadow: 0 10px 25px rgba(220, 38, 38, 0.3); z-index: 99; cursor: pointer; }

        /* شريط التنقل السفلي */
        .bottom-nav { position: fixed; bottom: 25px; left: 20px; right: 20px; background: white; height: 75px; border-radius: 25px; display: flex; justify-content: space-around; align-items: center; box-shadow: 0 15px 40px rgba(0,0,0,0.08); z-index: 1000; }
        .nav-item { color: #bbb; font-size: 22px; cursor: pointer; transition: 0.3s; }
        .nav-item.active { color: var(--m-red); }
    </style>
</head>
<body>

    <nav class="top-nav">
        <div class="m-logo">M</div>
        <div class="header-icons">
            <div class="circle-btn"><i class="fa-regular fa-moon"></i></div>
            <div class="circle-btn"><i class="fa-regular fa-bell"></i><div class="badge"></div></div>
        </div>
    </nav>

    <div class="container">
        <div class="welcome-text">
            <h1>مرحباً، <span id="merchantName">التاجر</span></h1>
            <p>إليك ملخص متجرك اليوم</p>
        </div>

        <div class="stats-row">
            <div class="stat-card card-red"><b>120 منتج</b><span>عدد المنتجات</span></div>
            <div class="stat-card card-orange"><b>8 قطع</b><span>على وشك النفاد</span></div>
            <div class="stat-card card-pink"><b>5 طلبات</b><span>طلبات جديدة</span></div>
        </div>

        <div class="search-box">
            <i class="fa-solid fa-magnifying-glass" style="color: #ccc;"></i>
            <input type="text" placeholder="ابحث عن منتج، طلب، أو عميل...">
        </div>

        <div class="actions-grid">
            <div class="action-box">
                <i class="fa-solid fa-store"></i>
                <h3>إعدادات المتجر</h3>
            </div>
            <div class="action-item" style="display:none;"></div> <div class="action-box">
                <i class="fa-solid fa-user-gear"></i>
                <h3>إعدادات التاجر</h3>
            </div>
            <div class="action-box">
                <i class="fa-solid fa-cubes"></i>
                <h3>المنتجات</h3>
            </div>
            <div class="action-box">
                <i class="fa-solid fa-truck-fast"></i>
                <h3>الطلبات</h3>
            </div>
            <div class="action-box">
                <i class="fa-solid fa-wallet"></i>
                <h3>المحفظة</h3>
            </div>
            <div class="action-box">
                <i class="fa-solid fa-chart-pie"></i>
                <h3>التقارير</h3>
            </div>
        </div>
    </div>

    <div class="fab"><i class="fa-solid fa-plus"></i></div>

    <nav class="bottom-nav">
        <div class="nav-item"><i class="fa-solid fa-bars"></i></div>
        <div class="nav-item"><i class="fa-regular fa-star"></i></div>
        <div class="nav-item active"><i class="fa-solid fa-house"></i></div>
        <div class="nav-item"><i class="fa-solid fa-rotate-right"></i></div>
        <div class="nav-item"><i class="fa-solid fa-chevron-left"></i></div>
    </nav>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const _supabase = supabase.createClient('https://wwbyzuvbqamucptnnlpf.supabase.co', 'sb_publishable_-hyuI4B77eb_uorLPMhfAg_8SvHM7Z2');
        
        async function checkUser() {
            const { data: { user } } = await _supabase.auth.getUser();
            if (user) {
                document.getElementById('merchantName').innerText = user.user_metadata.store_name || "تاجر M";
            }
        }
        checkUser();
    </script>
</body>
</html>
