<form id="signupForm">
    <div class="input-group">
        <label>الاسم الكامل</label>
        <input type="text" id="fullName" placeholder="أدخل اسمك الكريم" required>
    </div>
    
    <div class="input-group">
        <label>اسم المتجر</label>
        <input type="text" id="storeName" placeholder="مثال: متجر الأناقة" required>
    </div>

    <div class="input-group">
        <label>البريد الإلكتروني</label>
        <input type="email" id="email" placeholder="example@mail.com" required>
    </div>
    <div class="input-group">
        <label>كلمة المرور</label>
        <input type="password" id="password" placeholder="••••••••" required>
    </div>
    <button type="submit" class="btn-submit">إنشاء متجري الآن</button>
</form>

<script>
    // تحديث كود الإرسال ليشمل اسم المتجر في Supabase
    document.getElementById('signupForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const fullName = document.getElementById('fullName').value;
        const storeName = document.getElementById('storeName').value; // جلب اسم المتجر

        const { data, error } = await _supabase.auth.signUp({
            email,
            password,
            options: { 
                data: { 
                    full_name: fullName, 
                    store_name: storeName, // حفظ اسم المتجر في بيانات المستخدم
                    plan: selectedPlan 
                } 
            }
        });

        if (error) alert("عذراً: " + error.message);
        else alert("مبروك! تم إنشاء متجر " + storeName + " بنجاح. تفقّد بريدك للتفعيل.");
    });
</script>
