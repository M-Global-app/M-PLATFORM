<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>M PLATFORM | Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Aref+Ruqaa:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root { --m-red: #dc2626; --m-bg: #fcfcfc; --m-white: #ffffff; --m-text: #1a1a1a; --m-gray: #8e8e93; }
        body { margin: 0; font-family: 'Cairo', sans-serif; background-color: var(--m-bg); color: var(--m-text); padding-bottom: 90px; -webkit-tap-highlight-color: transparent; }

        /* تعديل الهيدر: تصغير الفراغ والشعار */
        .top-nav { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; background: transparent; }
        .m-logo-small { font-family: 'Aref Ruqaa', serif; font-size: 28px; color: var(--m-red); font-weight: 700; margin-left: 10px; }
        .header-icons { display: flex; gap: 10px; }
        .circle-btn { width: 40px; height: 40px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(0,0,0,0.04); color: #555; font-size: 16px; position: relative; }
        .badge { position: absolute; top: 8px; right: 8px; width: 7px; height: 7px; background: var(--m-red); border-radius: 50%; border: 1.5px solid white; }

        .container { padding: 0 20px; }
        .welcome-text { margin: 5px 0 20px; } /* تصغير الفراغ فوق كلمة مرحبا */
        .welcome-text h1 { font-size: 24px; font-weight: 900; margin: 0; }
        .welcome-text p { font-size: 12px; color: var(--m-gray); margin: 2px 0 0; }

        /* البطاقات العلوية */
        .stats-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; }
        .stat-card { background: white; padding: 12px 8px; border-radius: 18px; text-align: center; box-shadow: 0 4px 12px rgba(0,0,0,0.02); border: 1px solid #f8f8f8; }
        .stat-card b { font-size: 15px; display: block; color: var(--m-red); }
        .stat-card span { font-size: 9px; color: var(--m-gray); font-weight: 700; }

        .search-box { background: white; padding: 12px 18px; border-radius: 15px; display: flex; align-items: center; gap: 10px; box-shadow: 0 2px 15px rgba(0,0,0,0.02); margin-bottom: 20px; border: 1px solid #f0f0f0; }
        .search-box input { border: none; outline: none; width: 100%; font-family: 'Cairo'; font-size: 13px; }

        /* شبكة الإدارة */
        .actions-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .action-box { background: white; padding: 25px 10px; border-radius: 30px; text-align: center; box-shadow: 0 5px 20px rgba(0,0,0,0.02); border: 1px solid rgba(0,0,0,0.01); transition: 0.2s; }
        .action-box:active { transform: scale(0.96); }
        .action-box i { font-size: 28px; color: #ff8a8a; margin-bottom: 12px; display: block; }
        .action-box h3 { margin: 0; font-size: 14px; font-weight: 800; }

        /* الزر العائم */
        .fab { position: fixed; bottom: 105px; left: 20px; width: 55px; height: 55px; background: var(--m-red); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 22px; box-shadow: 0 8px 20px rgba(220, 38, 38, 0.3); z-index: 99; }

        /* شريط التنقل المطور */
        .bottom-nav { position: fixed; bottom: 20px; left: 15px; right: 15px; background: white; height: 70px; border-radius: 22px; display: flex; justify-content: space-around; align-items: center; box-shadow: 0 10px 35px rgba(0,0,0,0.08); z-index: 1000; }
        .nav-item { color: #ccc; font-size: 20px; transition: 0.3s; }
        .nav-item.active { color: var(--m-red); }
    </style>
</head>
<body>

    <nav class="top-nav">
        <div class="header-icons">
            <div class="circle-btn"><i class="fa-regular fa-bell"></i><div class="badge"></div></div>
            <div class="circle-btn"><i class="fa-regular fa-moon"></i></div>
        </div>
        <div class="m-logo-small">M</div>
    </nav>

    <div class="container">
        <div class="welcome-text">
            <h1>مرحباً، <span id="merchantName">التاجر</span></h1>
            <p id="todayDate">إليك ملخص متجرك اليوم</p>
        </div>

        <div class="stats-row">
            <div class="stat-card"><b>0</b><span>المنتجات</span></div>
            <div class="stat-card"><b>0</b><span>نقص المخزون</span></div>
            <div class="stat-card"><b>0</b><span>طلبات جديدة</span></div>
        </div>

        <div class="search-box">
            <i class="fa-solid fa-magnifying-glass" style="color: #ddd;"></i>
            <input type="text" placeholder="ابحث عن منتج أو طلب...">
        </div>

        <div class="actions-grid">
            <div class="action-box" onclick="location.href='#settings'"><i class="fa-solid fa-store"></i><h3>إعدادات المتجر</h3></div>
            <div class="action-box" onclick="location.href='#profile'"><i class="fa-solid fa-user-gear"></i><h3>حسابي</h3></div>
            <div class="action-box" onclick="location.href='#products'"><i class="fa-solid fa-cubes"></i><h3>المنتجات</h3></div>
            <div class="action-box" onclick="location.href='#orders'"><i class="fa-solid fa-truck-fast"></i><h3>الطلبات</h3></div>
        </div>
    </div>

    <div class="fab" onclick="alert('فتح واجهة إضافة منتج جديد')"><i class="fa-solid fa-plus"></i></div>

    <nav class="bottom-nav">
        <div class="nav-item"><i class="fa-solid fa-bars"></i></div>
        <div class="nav-item"><i class="fa-regular fa-star"></i></div>
        <div class="nav-item active"><i class="fa-solid fa-house"></i></div>
        <div class="nav-item"><i class="fa-solid fa-rotate-right"></i></div>
        <div class="nav-item"><i class="fa-solid fa-chevron-left"></i></div>
    </nav>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const _supabase = supabase.createClient('https://wwbyzuvbqamucptnnlpf.supabase.co', 'sb_publishable_-hyuI4B77eb_uorLPMhfAg_8SvHM7Z2');
        
        async function loadRealData() {
            const { data: { user } } = await _supabase.auth.getUser();
            if (user) {
                document.getElementById('merchantName').innerText = user.user_metadata.store_name || "تاجر M";
                // هنا مستقبلاً سنجلب مبيعاتك وعدد منتجاتك الحقيقي من قاعدة البيانات
            }
        }
        loadRealData();
    </script>
</body>
</html>

