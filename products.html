<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M | Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --red: #FF0000; }
        body { margin: 0; font-family: 'Cairo'; background: #f5f5f5; padding-bottom: 80px; }
        .header { background: #fff; padding: 20px; border-bottom: 2px solid var(--red); display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 28px; font-weight: 900; color: var(--red); }
        .container { padding: 15px; }
        .card { background: #fff; border-radius: 12px; padding: 10px; display: flex; align-items: center; gap: 15px; margin-bottom: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .p-img { width: 60px; height: 60px; border-radius: 8px; object-fit: cover; background: #eee; }
        .p-name { flex: 1; font-weight: 700; }
        .p-price { color: var(--red); font-weight: 900; }
        .add-btn { position: fixed; bottom: 20px; left: 20px; width: 60px; height: 60px; background: var(--red); color: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; text-decoration: none; box-shadow: 0 5px 15px rgba(255,0,0,0.3); }
    </style>
</head>
<body>
    <div class="header">
        <div onclick="history.back()" style="cursor:pointer">ðŸ”™</div>
        <div class="logo">M</div>
        <div></div>
    </div>
    <div class="container" id="productList"></div>
    <a href="add-product.html" class="add-btn">+</a>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const _supabase = supabase.createClient('https://wwbyzuvbqamucptnnlpf.supabase.co', 'sb_publishable_-hyuI4B77eb_uorLPMhfAg_8SvHM7Z2');
        
        async function load() {
            const { data: { user } } = await _supabase.auth.getUser();
            const { data: prods } = await _supabase.from('products').select('*').eq('merchant_id', user.id);
            
            document.getElementById('productList').innerHTML = prods.map(p => `
                <div class="card">
                    <img src="${p.image_url || 'https://via.placeholder.com/60'}" class="p-img" onerror="this.src='https://via.placeholder.com/60'">
                    <div class="p-name">${p.name}</div>
                    <div class="p-price">${p.price} Ø±.Ø³</div>
                    <div style="font-size:10px; background:#eee; padding:4px; border-radius:5px;">Ø§Ù„ÙƒÙ…ÙŠØ©: ${p.stock}</div>
                </div>
            `).join('');
        }
        load();
    </script>
</body>
</html>
